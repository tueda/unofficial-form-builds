<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FORM: proces.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FORM
   &#160;<span id="projectnumber">5.0.0-beta.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_08d237fc27d4ecd563f71c5d52f2fecc.html">sources</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">proces.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="form3_8h_source.html">form3.h</a>&quot;</code><br />
</div>
<p><a href="proces_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a34f57cc777142cbaa6e27a48deaeefa5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#a34f57cc777142cbaa6e27a48deaeefa5">DONE</a>(x)&#160;&#160;&#160;{ retvalue = x; goto Done; }</td></tr>
<tr class="separator:a34f57cc777142cbaa6e27a48deaeefa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a40d7bffd53816625b9617130d083e93a"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#a40d7bffd53816625b9617130d083e93a">Processor</a> (VOID)</td></tr>
<tr class="separator:a40d7bffd53816625b9617130d083e93a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec46f85385d81649977a4cdfbac5796b"><td class="memItemLeft" align="right" valign="top"><a id="aec46f85385d81649977a4cdfbac5796b"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>TestSub</b> (PHEAD WORD *term, WORD level)</td></tr>
<tr class="separator:aec46f85385d81649977a4cdfbac5796b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a467ec836e972638891f32dda2c30e29a"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#a467ec836e972638891f32dda2c30e29a">InFunction</a> (PHEAD WORD *term, WORD *termout)</td></tr>
<tr class="separator:a467ec836e972638891f32dda2c30e29a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6a2d2ce3d22f4c481dd2a44f80f606f"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#aa6a2d2ce3d22f4c481dd2a44f80f606f">InsertTerm</a> (PHEAD WORD *term, WORD replac, WORD extractbuff, WORD *position, WORD *termout, WORD tepos)</td></tr>
<tr class="separator:aa6a2d2ce3d22f4c481dd2a44f80f606f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2b062ed24c5214988d5f1fd7e767b5f"><td class="memItemLeft" align="right" valign="top">LONG&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#ad2b062ed24c5214988d5f1fd7e767b5f">PasteFile</a> (PHEAD WORD number, WORD *accum, <a class="el" href="structPoSiTiOn.html">POSITION</a> *position, WORD **accfill, <a class="el" href="structs_8h.html#a323639d869c15fed1226a3b508bbb1f1">RENUMBER</a> renumber, WORD *freeze, WORD nexpr)</td></tr>
<tr class="separator:ad2b062ed24c5214988d5f1fd7e767b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3786f3a0dbd05ff88b2732ba4f26fd33"><td class="memItemLeft" align="right" valign="top">WORD *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#a3786f3a0dbd05ff88b2732ba4f26fd33">PasteTerm</a> (PHEAD WORD number, WORD *accum, WORD *position, WORD times, WORD divby)</td></tr>
<tr class="separator:a3786f3a0dbd05ff88b2732ba4f26fd33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96c31b8050c29ab1504f53a777539775"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#a96c31b8050c29ab1504f53a777539775">FiniTerm</a> (PHEAD WORD *term, WORD *accum, WORD *termout, WORD number, WORD tepos)</td></tr>
<tr class="separator:a96c31b8050c29ab1504f53a777539775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4b8717dc948864d1b368b82f20d16a8"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#af4b8717dc948864d1b368b82f20d16a8">Generator</a> (PHEAD WORD *term, WORD level)</td></tr>
<tr class="separator:af4b8717dc948864d1b368b82f20d16a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a127ccce808592c093efe9fa4cdc65311"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#a127ccce808592c093efe9fa4cdc65311">DoOnePow</a> (PHEAD WORD *term, WORD power, WORD nexp, WORD *accum, WORD *aa, WORD level, WORD *freeze)</td></tr>
<tr class="separator:a127ccce808592c093efe9fa4cdc65311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5c818e233e9bdfabd56f8c991569545"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#ad5c818e233e9bdfabd56f8c991569545">Deferred</a> (PHEAD WORD *term, WORD level)</td></tr>
<tr class="separator:ad5c818e233e9bdfabd56f8c991569545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abda941ee0f213652203152572f64baab"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#abda941ee0f213652203152572f64baab">PrepPoly</a> (PHEAD WORD *term, WORD par)</td></tr>
<tr class="separator:abda941ee0f213652203152572f64baab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af03a5704a977a0cadefbf41b6832025b"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proces_8c.html#af03a5704a977a0cadefbf41b6832025b">PolyFunMul</a> (PHEAD WORD *term)</td></tr>
<tr class="separator:af03a5704a977a0cadefbf41b6832025b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ace6bc837ef17ced5f1772789803dcd43"><td class="memItemLeft" align="right" valign="top"><a id="ace6bc837ef17ced5f1772789803dcd43"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>printscratch</b> [2]</td></tr>
<tr class="separator:ace6bc837ef17ced5f1772789803dcd43"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains the central terms processor routines. This is the core of the virtual machine. All other files are to help these routines. </p>

<p class="definition">Definition in file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a34f57cc777142cbaa6e27a48deaeefa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34f57cc777142cbaa6e27a48deaeefa5">&#9670;&nbsp;</a></span>DONE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DONE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;{ retvalue = x; goto Done; }</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TestSub hunts for subexpression pointers. If one is found its power is given in AN.TeSuOut. and the returnvalue is 'expressionnumber'. If the expression number is negative it is an expression on disk.</p>
<p>In addition this routine tries to locate subexpression pointers in functions. It also notices that action must be taken with any of the special functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">term</td><td>The term in which TestSub hunts for potential action </td></tr>
    <tr><td class="paramname">level</td><td>The number of the 'level' in the compiler buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of the (sub)expression that was encountered.</dd></dl>
<p>Other values that are returned are in AN.TeSuOut, AR.TePos, AT.TMbuff, AN.TeInFun, AN.Frozen, AT.TMaddr</p>
<p>The level in the compiler buffer is more or less the number of the statement in the module. Hence it refers to the element in the lhs array.</p>
<p>This routine is one of the most important routines in FORM. </p>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l00682">682</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a40d7bffd53816625b9617130d083e93a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40d7bffd53816625b9617130d083e93a">&#9670;&nbsp;</a></span>Processor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD Processor </td>
          <td>(</td>
          <td class="paramtype">VOID&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the central processor. It accepts a stream of Expressions which is accessed by calls to GetTerm. The expressions reside either in AR.infile or AR.hidefile The definitions of an expression are seen as an id-statement, so the primary Expressions should be written to the system of scratch files as single terms with an expression pointer. Each expression is terminated with a zero and the whole is terminated by two zeroes.</p>
<p>The routine DoExecute should determine whether results are to be printed, should revert the scratch I/O directions etc. In principle it is DoExecute that calls Processor.</p>
<dl class="section return"><dt>Returns</dt><dd>if everything OK: 0. Otherwise error. The preprocessor may continue with compilation though. Really fatal errors should return on the spot by calling Terminate. </dd></dl>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l00064">64</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
<a id="a467ec836e972638891f32dda2c30e29a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a467ec836e972638891f32dda2c30e29a">&#9670;&nbsp;</a></span>InFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD InFunction </td>
          <td>(</td>
          <td class="paramtype">PHEAD WORD *&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>termout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Makes the replacement of the subexpression with the number 'replac' in a function argument. Additional information is passed in some of the AR, AN, AT variables.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">term</td><td>The input term </td></tr>
    <tr><td class="paramname">termout</td><td>The output term </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0: everything is fine, Negative: fatal, Positive: error.</dd></dl>
<p>Special attention should be given to nested functions! </p>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l02174">2174</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
<a id="aa6a2d2ce3d22f4c481dd2a44f80f606f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6a2d2ce3d22f4c481dd2a44f80f606f">&#9670;&nbsp;</a></span>InsertTerm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD InsertTerm </td>
          <td>(</td>
          <td class="paramtype">PHEAD WORD *&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>replac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>extractbuff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>termout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>tepos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Puts the terms 'term' and 'position' together into a single legal term in termout. replac is the number of the subexpression that should be replaced. It must be a positive term. When action is needed in the argument of a function all terms in that argument are dealt with recursively. The subexpression is sorted. Only one subexpression is done at a time this way.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">term</td><td>the input term </td></tr>
    <tr><td class="paramname">replac</td><td>number of the subexpression pointer to replace </td></tr>
    <tr><td class="paramname">extractbuff</td><td>number of the compiler buffer replac refers to </td></tr>
    <tr><td class="paramname">position</td><td>position from where to take the term in the compiler buffer </td></tr>
    <tr><td class="paramname">termout</td><td>the output term </td></tr>
    <tr><td class="paramname">tepos</td><td>offset in term where the subexpression is. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Normal conventions (OK = 0). </dd></dl>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l02720">2720</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
<a id="ad2b062ed24c5214988d5f1fd7e767b5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2b062ed24c5214988d5f1fd7e767b5f">&#9670;&nbsp;</a></span>PasteFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LONG PasteFile </td>
          <td>(</td>
          <td class="paramtype">PHEAD WORD&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>accum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPoSiTiOn.html">POSITION</a> *&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD **&#160;</td>
          <td class="paramname"><em>accfill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structs_8h.html#a323639d869c15fed1226a3b508bbb1f1">RENUMBER</a>&#160;</td>
          <td class="paramname"><em>renumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>freeze</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>nexpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets a term from stored expression expr and puts it in the accumulator at position number. It returns the length of the term that came from file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">number</td><td>number of partial terms to skip in accum </td></tr>
    <tr><td class="paramname">accum</td><td>the accumulator </td></tr>
    <tr><td class="paramname">position</td><td>file position from where to get the stored term </td></tr>
    <tr><td class="paramname">accfill</td><td>returns tail position in accum </td></tr>
    <tr><td class="paramname">renumber</td><td>the renumber struct for the variables in the stored expression </td></tr>
    <tr><td class="paramname">freeze</td><td>information about if we need only the contents of a bracket </td></tr>
    <tr><td class="paramname">nexpr</td><td>the number of the stored expression </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Normal conventions (OK = 0). </dd></dl>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l02856">2856</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
<a id="a3786f3a0dbd05ff88b2732ba4f26fd33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3786f3a0dbd05ff88b2732ba4f26fd33">&#9670;&nbsp;</a></span>PasteTerm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD* PasteTerm </td>
          <td>(</td>
          <td class="paramtype">PHEAD WORD&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>accum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>times</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>divby</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Puts the term at position in the accumulator accum at position 'number+1'. if times &gt; 0 the coefficient of this term is multiplied by times/divby.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">number</td><td>The number of term fragments in accum that should be skipped </td></tr>
    <tr><td class="paramname">accum</td><td>The accumulator of term fragments </td></tr>
    <tr><td class="paramname">position</td><td>A position in (typically) a compiler buffer from where a (piece of a) term comes. </td></tr>
    <tr><td class="paramname">times</td><td>Multiply the result by this </td></tr>
    <tr><td class="paramname">divby</td><td>Divide the result by this.</td></tr>
  </table>
  </dd>
</dl>
<p>This routine is typically used when we have to replace a (sub)expression pointer by a power of a (sub)expression. This uses mostly a binomial expansion and the new term is the old term multiplied one by one by terms of the new expression. The factors times and divby keep track of the binomial coefficient. Once this is complete, the routine FiniTerm will make the contents of the accumulator into a proper term that still needs to be normalized. </p>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l02978">2978</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
<a id="a96c31b8050c29ab1504f53a777539775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96c31b8050c29ab1504f53a777539775">&#9670;&nbsp;</a></span>FiniTerm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD FiniTerm </td>
          <td>(</td>
          <td class="paramtype">PHEAD WORD *&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>accum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>termout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>tepos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Concatenates the contents of the accumulator into a single legal term, which replaces the subexpression pointer</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">term</td><td>the input term with the (sub)expression subterm </td></tr>
    <tr><td class="paramname">accum</td><td>the accumulator with the term fragments </td></tr>
    <tr><td class="paramname">termout</td><td>the location where the output should be written </td></tr>
    <tr><td class="paramname">number</td><td>the number of term fragments in the accumulator </td></tr>
    <tr><td class="paramname">tepos</td><td>the position of the subterm in term to be replaced </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l03043">3043</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
<a id="af4b8717dc948864d1b368b82f20d16a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4b8717dc948864d1b368b82f20d16a8">&#9670;&nbsp;</a></span>Generator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD Generator </td>
          <td>(</td>
          <td class="paramtype">PHEAD WORD *&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The heart of the program. Here the expansion tree is set up in one giant recursion</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">term</td><td>the input term. may be overwritten </td></tr>
    <tr><td class="paramname">level</td><td>the level in the compiler buffer (number of statement) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Normal conventions (OK = 0).</dd></dl>
<p>The routine looks first whether there are unsubstituted (sub)expressions. If so, one of them gets inserted term by term and the new term is used in a renewed call to Generator. If there are no (sub)expressions, the term is normalized, the compiler level is raised (next statement) and the program looks what type of statement this is. If this is a special statement it is either treated on the spot or the appropriate routine is called. If it is a substitution, the pattern matcher is called (TestMatch) which tells whether there was a match. If so we need to call TestSub again to test for (sub)expressions. If we run out of levels, the term receives a final treatment for modulus calculus and/or brackets and is then sent off to the sorting routines. </p>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l03242">3242</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
<a id="a127ccce808592c093efe9fa4cdc65311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a127ccce808592c093efe9fa4cdc65311">&#9670;&nbsp;</a></span>DoOnePow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD DoOnePow </td>
          <td>(</td>
          <td class="paramtype">PHEAD WORD *&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>power</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>nexp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>accum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>aa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>freeze</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Routine gets one power of an expression in the scratch system. If there are more powers needed there will be a recursion.</p>
<p>No attempt is made to use binomials because we have no information about commutating properties.</p>
<p>There is a searching for the contents of brackets if needed. This searching may be rather slow because of the single links.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">term</td><td>is the term we are adding to. </td></tr>
    <tr><td class="paramname">power</td><td>is the power of the expression that we need. </td></tr>
    <tr><td class="paramname">nexp</td><td>is the number of the expression. </td></tr>
    <tr><td class="paramname">accum</td><td>is the accumulator of terms. It accepts the termfragments that are made into a proper term in FiniTerm </td></tr>
    <tr><td class="paramname">aa</td><td>points to the start of the entire accumulator. In *aa we store the number of term fragments that are in the accumulator. </td></tr>
    <tr><td class="paramname">level</td><td>is the current depth in the tree of statements. It is needed to continue to the next operation/substitution with each generated term </td></tr>
    <tr><td class="paramname">freeze</td><td>is the pointer to the bracket information that should be matched. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l04589">4589</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
<a id="ad5c818e233e9bdfabd56f8c991569545"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5c818e233e9bdfabd56f8c991569545">&#9670;&nbsp;</a></span>Deferred()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD Deferred </td>
          <td>(</td>
          <td class="paramtype">PHEAD WORD *&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Picks up the deferred brackets. These are the bracket contents of which we postpone the reading when we use the 'Keep Brackets' statement. These contents are multiplying the terms just before they are sent to the sorting system. Special attention goes to having it thread-safe We have to lock positioning the file and reading it in a thread specific buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">term</td><td>The term that must be multiplied by the contents of the current bracket </td></tr>
    <tr><td class="paramname">level</td><td>The compiler level. This is needed because after multiplying term by term we call Generator again. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l04810">4810</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
<a id="abda941ee0f213652203152572f64baab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abda941ee0f213652203152572f64baab">&#9670;&nbsp;</a></span>PrepPoly()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD PrepPoly </td>
          <td>(</td>
          <td class="paramtype">PHEAD WORD *&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>par</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Routine checks whether the count of function AR.PolyFun is zero or one. If it is one and it has one scalarlike argument the coefficient of the term is pulled inside the argument. If the count is zero a new function is made with the coefficient as its only argument. The function should be placed at its proper position.</p>
<p>When this function is active it places the PolyFun as last object before the coefficient. This is needed because otherwise the compress algorithm has problems in MergePatches.</p>
<p>The bracket routine should also place the PolyFun at a comparable spot. The compression should then stop at the PolyFun. It doesn't really have to stop when writing the final result but this may be too complicated.</p>
<p>The parameter par tells whether we are at groundlevel or inside a function or dollar variable. </p>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l04938">4938</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
<a id="af03a5704a977a0cadefbf41b6832025b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af03a5704a977a0cadefbf41b6832025b">&#9670;&nbsp;</a></span>PolyFunMul()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD PolyFunMul </td>
          <td>(</td>
          <td class="paramtype">PHEAD WORD *&#160;</td>
          <td class="paramname"><em>term</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Multiplies the arguments of multiple occurrences of the polyfun. In this routine we do the original PolyFun with one argument only. The PolyRatFun (PolyFunType = 2) is done in a dedicated routine in the file <a class="el" href="polywrap_8cc.html">polywrap.cc</a> The new result is written over the old result.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">term</td><td>It contains the input term and later the output. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Normal conventions (OK = 0). </dd></dl>

<p class="definition">Definition at line <a class="el" href="proces_8c_source.html#l05326">5326</a> of file <a class="el" href="proces_8c_source.html">proces.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
