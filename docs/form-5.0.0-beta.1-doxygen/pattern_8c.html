<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FORM: pattern.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FORM
   &#160;<span id="projectnumber">5.0.0-beta.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_08d237fc27d4ecd563f71c5d52f2fecc.html">sources</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pattern.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="form3_8h_source.html">form3.h</a>&quot;</code><br />
</div>
<p><a href="pattern_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aba36e6b67bd0a972d704d3416189303b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>PutInBuffers</b>(pow)</td></tr>
<tr class="separator:aba36e6b67bd0a972d704d3416189303b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a23841bb1c7de8056ebccec32f4217602"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pattern_8c.html#a23841bb1c7de8056ebccec32f4217602">TestMatch</a> (PHEAD WORD *term, WORD *level)</td></tr>
<tr class="separator:a23841bb1c7de8056ebccec32f4217602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1720b78decb4d39d9cb5d5059da22c9b"><td class="memItemLeft" align="right" valign="top"><a id="a1720b78decb4d39d9cb5d5059da22c9b"></a>
VOID&#160;</td><td class="memItemRight" valign="bottom"><b>Substitute</b> (PHEAD WORD *term, WORD *pattern, WORD power)</td></tr>
<tr class="separator:a1720b78decb4d39d9cb5d5059da22c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d9a8d6624dfcbb6047e3b0746377d42"><td class="memItemLeft" align="right" valign="top"><a id="a4d9a8d6624dfcbb6047e3b0746377d42"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>FindAll</b> (PHEAD WORD *term, WORD *pattern, WORD level, WORD *par)</td></tr>
<tr class="separator:a4d9a8d6624dfcbb6047e3b0746377d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a8e713e5ed23bf0f9f6b51efa3bceb4"><td class="memItemLeft" align="right" valign="top"><a id="a0a8e713e5ed23bf0f9f6b51efa3bceb4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>TestSelect</b> (WORD *term, WORD *setp)</td></tr>
<tr class="separator:a0a8e713e5ed23bf0f9f6b51efa3bceb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b9d0ab3060bc77cd037a8d75a8431df"><td class="memItemLeft" align="right" valign="top"><a id="a1b9d0ab3060bc77cd037a8d75a8431df"></a>
VOID&#160;</td><td class="memItemRight" valign="bottom"><b>SubsInAll</b> (PHEAD0)</td></tr>
<tr class="separator:a1b9d0ab3060bc77cd037a8d75a8431df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68936044932b1823b8b0765d0ab13043"><td class="memItemLeft" align="right" valign="top"><a id="a68936044932b1823b8b0765d0ab13043"></a>
VOID&#160;</td><td class="memItemRight" valign="bottom"><b>TransferBuffer</b> (int from, int to, int spectator)</td></tr>
<tr class="separator:a68936044932b1823b8b0765d0ab13043"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d9b0a9dd577df31daef57c486aaa49"><td class="memItemLeft" align="right" valign="top"><a id="a91d9b0a9dd577df31daef57c486aaa49"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>TakeIDfunction</b> (PHEAD WORD *term)</td></tr>
<tr class="separator:a91d9b0a9dd577df31daef57c486aaa49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Top level pattern matching routines. More pattern matching is found in <a class="el" href="findpat_8c.html">findpat.c</a>, <a class="el" href="function_8c.html">function.c</a>, <a class="el" href="symmetr_8c.html">symmetr.c</a> and <a class="el" href="smart_8c.html">smart.c</a>. The last three files contain the matching inside functions. The file <a class="el" href="pattern_8c.html">pattern.c</a> contains also the very important routine Substitute. All regular pattern matching is just the finding of the pattern and indicating what are the wildcards etc. The routine Substitute does the actual removal of the pattern and replaces it by a subterm of the type SUBEXPRESSION. </p>

<p class="definition">Definition in file <a class="el" href="pattern_8c_source.html">pattern.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aba36e6b67bd0a972d704d3416189303b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba36e6b67bd0a972d704d3416189303b">&#9670;&nbsp;</a></span>PutInBuffers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PutInBuffers</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pow</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="comtool_8c.html#aab7acff43928a668734d4c39c01fbdb4">AddRHS</a>(AT.ebufnum,1); \</div>
<div class="line">    *out++ = SUBEXPRESSION; \</div>
<div class="line">    *out++ = SUBEXPSIZE; \</div>
<div class="line">    *out++ = C-&gt;numrhs; \</div>
<div class="line">    *out++ = pow; \</div>
<div class="line">    *out++ = AT.ebufnum; \</div>
<div class="line">    FILLSUB(out) \</div>
<div class="line">    r = AT.pWorkSpace[rhs+i]; \</div>
<div class="line">    if ( *r &gt; 0 ) { \</div>
<div class="line">        oldinr = r[*r]; r[*r] = 0; \</div>
<div class="line">        AddNtoC(AT.ebufnum,(*r+1-ARGHEAD),(r+ARGHEAD),14); \</div>
<div class="line">        r[*r] = oldinr; \</div>
<div class="line">    } \</div>
<div class="line">    else { \</div>
<div class="line">        ToGeneral(r,buffer,1); \</div>
<div class="line">        buffer[buffer[0]] = 0; \</div>
<div class="line">        AddNtoC(AT.ebufnum,buffer[0]+1,buffer,15); \</div>
<div class="line">    }</div>
<div class="ttc" id="acomtool_8c_html_aab7acff43928a668734d4c39c01fbdb4"><div class="ttname"><a href="comtool_8c.html#aab7acff43928a668734d4c39c01fbdb4">AddRHS</a></div><div class="ttdeci">WORD * AddRHS(int num, int type)</div><div class="ttdef"><b>Definition:</b> <a href="comtool_8c_source.html#l00214">comtool.c:214</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="pattern_8c_source.html#l02193">2193</a> of file <a class="el" href="pattern_8c_source.html">pattern.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a23841bb1c7de8056ebccec32f4217602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23841bb1c7de8056ebccec32f4217602">&#9670;&nbsp;</a></span>TestMatch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD TestMatch </td>
          <td>(</td>
          <td class="paramtype">PHEAD WORD *&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine governs the pattern matching. If it decides that a substitution should be made, this can be either the insertion of a right hand side (C-&gt;rhs) or the automatic generation of terms as a result of an operation (like trace). The object to be replaced is removed from term and a subexpression pointer is inserted. If the substitution is made more than once there can be more subexpression pointers. Its number is positive as it corresponds to the level at which the C-&gt;rhs can be found in the compiler output. The subexpression pointer contains the wildcard substitution information. The power is found in *AT.TMout. For operations the subexpression pointer is negative and corresponds to an address in the array AT.TMout. In this array are then the instructions for the routine to be called and its number in the array 'Operations' The format is here: length,functionnumber,length-2 parameters</p>
<p>There is a certain complexity wrt repeat levels. Another complication is the poking of the wildcard values in the subexpression prototype in the compiler buffer. This was how things were done in the past with sequential FORM, but with the advent of TFORM this cannot be maintained. Now, for TFORM we make a copy of it. 7-may-2008 (JV): We cannot yet guarantee that this has been done 100% correctly. There are errors that occur in TFORM only and that may indicate problems. </p>

<p class="definition">Definition at line <a class="el" href="pattern_8c_source.html#l00097">97</a> of file <a class="el" href="pattern_8c_source.html">pattern.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
